<style>
  .activity-container {
    padding-top:10px;
    padding-bottom:10px;
  }
</style>

<div id="accordion">
  {% for lesson in lessons %}
  <div class="accordion-item">
    <h2 class="accordion-header" id="heading{{ loop.index }}">
      <button class="accordion-button {{ loop.first ? '' : 'collapsed' }}" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ loop.index }}" aria-expanded="{{ loop.first ? 'true' : 'false' }}" aria-controls="collapse{{ loop.index }}">
        {{ lesson.title }}
      </button>
    </h2>
    <div id="collapse{{ loop.index }}" class="accordion-collapse collapse{{ loop.first ? ' show' : '' }}" aria-labelledby="heading{{ loop.index }}" data-bs-parent="#accordion">
      <div class="p-1">
        {% for activity in lesson.activities %}
        <div class="activity-container">
          <div>Lesson {{ loop.index }} : {{ activity.title }}</div>
          <a 
            href="#" 
            data-request="ActivityDetail::onUpdateContent"
            data-request-update="'ActivityDetail::default': '#result'"
            data-request-data="{ activity_id: {{activity.id}} }"
            class="btn btn-primary">Load the activity</a>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
  {% endfor %}
</div>
